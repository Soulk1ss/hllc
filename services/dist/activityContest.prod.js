"use strict";var connection=require("../configs/database"),modelActivityContest=connection.model("ActivityContest",{acv_u_id:String,ac_id:String,ac_url:String,u_name:String,u_school:String,acv_data:Date});module.exports=modelActivityContest,module.exports={onVote:function(t){return new Promise(function(n,e){var o=new modelActivityContest({acv_u_id:t.acv_u_id,ac_id:t.ac_id,ac_url:t.ac_url,u_name:t.u_name,u_school:t.u_school,acv_data:Date.now()});o.save().then(function(t){return n(o)}).catch(function(t){return e(t)})})},groupByClipID:function(){return new Promise(function(n,e){modelActivityContest.aggregate([{$group:{_id:"$ac_id",total:{$sum:1}}}]).then(function(t){n(t)}).catch(function(t){return e(t)})})},findByUID:function(t){return new Promise(function(n,e){var o={result:[],voteNum:0},i={};i.acv_u_id=t,modelActivityContest.find(i).countDocuments().then(function(t){o.voteNum=t,modelActivityContest.find(i).then(function(t){o.result=t,n(o)})}).catch(function(t){return e(t)})})}};